<!-- lokales.html -->
<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>üå≥ CoNLL-U Tree-Vergleich (Multi-Autor)</title>
  <link rel="stylesheet" href="./styles.css" />
</head>
<body>
  <header class="topbar">
    <div class="brand">
      <div class="logo">üå≥</div>
      <div>
        <div class="title">CoNLL-U Tree-Vergleich</div>
        <div class="subtitle">lokal ¬∑ mehrere Autoren ¬∑ Gold-Export</div>
      </div>
    </div>

    <div class="actions">
      <label class="btn">
        <input id="fileInput" type="file" accept=".conllu,.conll,.txt" multiple />
        Dateien w√§hlen
      </label>

      <label class="btn secondary" title="Chrome/Edge: ganzen Ordner w√§hlen (inkl. Unterordner)">
        <input id="dirInput" type="file" webkitdirectory directory multiple />
        Ordner w√§hlen
      </label>

      <button id="btnClear" class="btn danger" type="button">Reset</button>
    </div>
  </header>

  <main class="layout">
    <section class="panel">
      <h2>1) Daten</h2>

      <div class="card">
        <div class="row">
          <div class="field">
            <label>Dokument/Ordner</label>
            <select id="docSelect" disabled>
              <option value="">‚Äì</option>
            </select>
          </div>

          <div class="field">
            <label>Ansicht</label>
            <div class="toggles">
              <label class="toggle"><input id="onlyDiffSents" type="checkbox" /> nur S√§tze mit Unterschieden</label>
              <label class="toggle"><input id="onlyDiffEdges" type="checkbox" /> nur abweichende Kanten anzeigen</label>
              <label class="toggle"><input id="showPos" type="checkbox" /> Token zeigen mit UPOS/XPOS</label>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="field">
            <label>Suche (Satztext)</label>
            <input id="searchInput" type="text" placeholder="z.B. Lars oder und oder ..." disabled />
          </div>

          <div class="field">
            <label>Export</label>
            <div class="actions-inline">
              <button id="btnDownloadTxt" class="btn secondary" type="button" disabled>tree.txt herunterladen</button>
              <button id="btnCopy" class="btn secondary" type="button" disabled>Ansicht kopieren</button>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="field">
            <label>Geladene Dateien</label>
            <textarea id="fileList" class="textarea" rows="6" readonly disabled>‚Äì</textarea>
          </div>
        </div>

        <div class="hint">
          <div><strong>Input-Modi</strong></div>
          <ul>
            <li><strong>Dateien w√§hlen</strong>: mehrere <code>.conllu</code> Dateien = mehrere Autoren (ein Dokument).</li>
            <li><strong>Ordner w√§hlen</strong>: Ordnerstruktur wird gruppiert; jeder Unterordner ist ein ‚ÄûDokument‚Äú, Dateien darin sind Autoren.</li>
          </ul>
        </div>
      </div>

      <h2>2) S√§tze</h2>
      <div class="card list-card">
        <div id="sentList" class="sent-list empty">Noch keine Daten geladen.</div>
      </div>
    </section>

    <section class="panel">
      <h2>3) Baum</h2>

      <div class="card">
        <div class="legend">
          <span class="badge ok">‚úÖ alle gleich</span>
          <span class="badge warn">‚ö†Ô∏è Label-Diff</span>
          <span class="badge miss">‚ûñ fehlt bei manchen (x/y)</span>
          <span class="badge tok">‚úçÔ∏è Text-Diff</span>
        </div>

        <div id="treeMeta" class="meta muted">‚Äì</div>
        <pre id="treeView" class="tree empty">Lade Daten, w√§hle dann links einen Satz.</pre>
      </div>

      <h2>Autoren</h2>
      <div class="card">
        <div id="authorList" class="authors empty">‚Äì</div>
        <div class="hint small">
          Dateiname ‚áí Autorname. Du kannst Namen hier √§ndern (wirkt nur lokal im Browser).
        </div>
      </div>

      <h2>Gold erzeugen</h2>
      <div class="card">
        <div class="row">
          <div class="field">
            <label>Gold aus Autor A</label>
            <select id="goldAuthorA" disabled><option value="">‚Äì</option></select>
          </div>
          <div class="field">
            <label>und Autor B</label>
            <select id="goldAuthorB" disabled><option value="">‚Äì</option></select>
          </div>
        </div>

        <div class="row">
          <div class="field">
            <label>Merge-Strategie</label>
            <select id="goldMode" disabled>
              <option value="preferA">Prefer A (A wenn vorhanden, sonst B)</option>
              <option value="preferB">Prefer B (B wenn vorhanden, sonst A)</option>
              <option value="unionPreferA">Union, Konflikte ‚Üí A</option>
              <option value="unionPreferB">Union, Konflikte ‚Üí B</option>
              <option value="intersection">Intersection (nur wenn gleicher HEAD; sonst Konflikt)</option>
              <option value="strictAgree">Strict (nur wenn HEAD+DEPREL gleich; sonst Konflikt)</option>
            </select>
          </div>
          <div class="field">
            <label>Label bei gleichem HEAD aber unterschiedlichem DEPREL</label>
            <select id="goldLabelMode" disabled>
              <option value="preferA">DEPREL von A</option>
              <option value="preferB">DEPREL von B</option>
            </select>
          </div>
        </div>

        <div class="row">
          <div class="field">
            <label>Token-Quelle (FORM/UPOS/XPOS)</label>
            <select id="goldTokenMode" disabled>
              <option value="preferA">Tokens von A (Fallback B)</option>
              <option value="preferB">Tokens von B (Fallback A)</option>
            </select>
          </div>
          <div class="field">
            <label>Satzanzahl</label>
            <select id="goldSentCountMode" disabled>
              <option value="min">min(A,B)</option>
              <option value="max">max(A,B)</option>
            </select>
          </div>
        </div>

        <div class="row">
          <div class="field">
            <label>Custom Optionen</label>
            <div class="toggles">
              <label class="toggle"><input id="goldIncludeComments" type="checkbox" checked disabled /> Kommentare (# gold_*) + Konflikt-Zusammenfassung</label>
              <label class="toggle"><input id="goldMarkMisc" type="checkbox" checked disabled /> Konflikte/Tok-Mismatch in MISC markieren</label>
              <label class="toggle"><input id="goldFixOrphanHeads" type="checkbox" checked disabled /> HEAD korrigieren, wenn Kopf-Token fehlt (‚Üí 0)</label>
            </div>
          </div>

          <div class="field">
            <label>Output-Dateiname</label>
            <input id="goldFilename" type="text" value="gold.conllu" disabled />
            <div class="actions-inline" style="margin-top:10px;">
              <button id="btnGoldDownload" class="btn" type="button" disabled>Gold .conllu herunterladen</button>
            </div>
          </div>
        </div>

        <div class="hint small">
          In Konfliktf√§llen wird standardm√§√üig <code>HEAD=0</code> und <code>DEPREL=dep</code> gesetzt (und optional markiert).
        </div>
      </div>
    </section>
  </main>

  <footer class="footer muted">
    Lokal im Browser ¬∑ keine Server-Kommunikation
  </footer>

  <script src="./app.js"></script>
</body>
</html>
